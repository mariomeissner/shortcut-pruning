# @package _global_

defaults:
  - /pruning: unstructured_pruning.yaml
  - override /model: bert_base_uncased_pruned.yaml
  - override /datamodule: mnli.yaml

name: pruning/vanilla_then_prune
seed: 42
test_after_training: False # Cannot test on MNLI, test set labels are hidden

model:
  loss_fn: "reweight-by-teacher"
  from_checkpoint: /works/data0/meissner/shortcut-pruning/bert_mnli/checkpoints/last.ckpt
  use_bias_probs: True
  freeze_weights: True

datamodule:
  bias_name: "mnli_shallow_2K_fixed.json"
  bias_path: "/home/meissner/shortcut-pruning/data/weak_models/utama/mnli_shallow_2K_fixed.json"
  batch_size: 128

trainer:
  max_epochs: 12
  gpus: 1
